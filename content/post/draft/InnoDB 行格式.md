---
title: "InnoDB 行格式"
date: 2019-11-03T16:51:21+08:00
keywords: []
description: ""
tags: [
    "MySQL"
]
categories: [
    "杂货铺"
]
autoCollapseToc: false
author: "yuanzx"
draft: true
---

# 1 InnoDB 行格式

InnoDB 中的行格式目前有四种，分别是 Compact、Redundant、Dynamic 和 Compressed 四种行格式。

## 1.1 Compact 行格式

这种行格式可以被分为两部分，分别是**记录的额外信息**和**记录的真实数据**。

![Compact 行格式](/hub/2019/November/2.png)

记录的额外信息中分为三个部分，分别是**变长字段长度列表**、**NULL 值列表**和**记录头信息**。

## 1.1.1 变长字段长度列表

变长字段长度列表便是用来存储 `VARCHAR(M)` 这样的变长数据类型的在使用时实际的长度。由于一个表中可能会有多个变长字段，所以在开头的部分用一个列表存储变长字段真实占用的字节长度，这个列表中存放的列是以小端模式存放的，比如说第一列占一个字节 0x01、第二列占两个字节 0x02、第三列占三个字节 0x03，那么在存储这个列表的时候存储的是 0x03 0x02 0x01。

如果仅以一个字节表示长度，那么最长只能是 255 个字节，而在存储的时候很多情况下都会超过 255 个字节，这时候 InnoDB 支持以两个字节表示长度，但是也仅可以用两个字节表示长度。
