---
title: "Base64 的编码方式"
date: 2019-11-09T09:23:05+08:00
keywords: []
description: ""
tags: [
    "数据结构与算法"
]
categories: [
    "杂货铺"
]
autoCollapseToc: false
author: "yuanzx"
---

# 1 Base64 使用场景

1. 数据传输需要经过多个路由设备，不同设备的处理方式不同，为了防止处理不可见字符出现错误，所以使用 Base64 将数据转换成可见字符，防止传输中出错。
2. 进行简单的数据加密（对于懂行的人这玩意和没加密一样）

# 2 加密方式

1. 每三个字节作为一组，一共是 24 个二进制位
2. 将这 24 个二进制位分为四组，每个组有 6 个二进制位
3. 在每个组前加两个 0，扩展成 32 个二进制位，即四个字节
4. 根据下表，得到扩展后的每个字节对应可见字符，也就是 Base64 编码后的结果

![Base64 码表](/hub/2019/November/4.png)

对于不足三个字节的情况分成两种：

## 2.1 只有两个字节

将两个字节共 16 位按照上述规则分成三组，最后一组除了前面加两个 0 意外，后面也加两个 0，这样就得到一个三位的 Base64 编码，再在末尾补上一个 "=" 号。

比如，"Ma" 这个字符串，二进制形式是 01001101_01100001，将它分成三组，即 010011、010110、0001，然后在前面加两个 0，最后一个字节后面也加两个 0，变成 00010011、00010110、00000100，将这三个二进制转成十进制就是 19、22、4，在码表中查找对应的字符，即 T、W、E，将他们合在一起最后补上 = 即可，也就是 TWE=

## 2.2 只有一个字节

将一个字节共 8 位按照上述规则分成两组，最后一组除了前面加两个 0 以外，后面再加 4 个 0.这样就得到一个两位的 Base64 编码，再在末尾补上两个 = 号。

比如 "M" 个字母是一个字节，二进制是 01001101，分成两组即 010011、01，然后再前面补上两个 0，最后一个字节补上四个 0，也就是 00010011、00010000，换算成十进制也就是 19、16，然后查看码表得到 T、Q，最后合在一起补上两个 = 即可，也就是 TQ==

# 参考资料

1. [Base64 笔记](http://www.ruanyifeng.com/blog/2008/06/base64.html)